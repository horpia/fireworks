(()=>{var t={186:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({1:function(t,e,o,r,i){var n=t.lambda,s=t.escapeExpression;return'\t<div data-color="'+s(n(e,e))+'" style="--color: '+s(n(e,e))+'"></div>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){var n,s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div>\n"+(null!=(n=s(o,"each").call(null!=e?e:t.nullContext||{},null!=e?s(e,"colors"):e,{name:"each",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i,loc:{start:{line:2,column:0},end:{line:4,column:9}}}))?n:"")+"</div>"},useData:!0})},282:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){var n,s=null!=e?e:t.nullContext||{},a=t.hooks.helperMissing,l="function",h=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<form action="#">\n\t<select name="type">\n\t\t<option value="type0">Type 0</option>\n\t\t<option value="type1-circle">Type 1 - Circle</option>\n\t\t<option value="type1-sphere" selected>Type 1 - Sphere</option>\n\t\t<option value="type1-disk">Type 1 - Disk</option>\n\t\t<option value="type2">Type 2</option>\n\t\t<option value="comb1">Comb 1 (Circle + Sparks)</option>\n\t\t<option value="comb2">Comb 2 (Circle + Claps)</option>\n\t\t<option value="comb3">Comb 3 (Circle + Disk)</option>\n\t\t<option value="comb4">Comb 4 (3 Spheres)</option>\n\t\t<option value="comb5">Comb 5 (Sphere + Sparks)</option>\n\t\t<option value="comb6">Comb 6 (3 Disks)</option>\n\t</select>\n\t<fw-exp-type0 hidden data-type="type0" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:15,column:45},end:{line:15,column:52}}}):n)+'"></fw-exp-type0>\n\t<fw-exp-type1-circle hidden data-type="type1-circle" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:16,column:59},end:{line:16,column:66}}}):n)+'"></fw-exp-type1-circle>\n\t<fw-exp-type1-sphere hidden data-type="type1-sphere" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:17,column:59},end:{line:17,column:66}}}):n)+'"></fw-exp-type1-sphere>\n\t<fw-exp-type1-disk hidden data-type="type1-disk" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:18,column:55},end:{line:18,column:62}}}):n)+'"></fw-exp-type1-disk>\n\t<fw-exp-type2 hidden data-type="type2" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:19,column:45},end:{line:19,column:52}}}):n)+'"></fw-exp-type2>\n\t<fw-exp-comb hidden type="comb1" data-type="comb1" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:20,column:57},end:{line:20,column:64}}}):n)+'"></fw-exp-comb>\n\t<fw-exp-comb hidden type="comb2" data-type="comb2" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:21,column:57},end:{line:21,column:64}}}):n)+'"></fw-exp-comb>\n\t<fw-exp-comb hidden type="comb3" data-type="comb3" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:22,column:57},end:{line:22,column:64}}}):n)+'"></fw-exp-comb>\n\t<fw-exp-comb hidden type="comb4" data-type="comb4" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:23,column:57},end:{line:23,column:64}}}):n)+'"></fw-exp-comb>\n\t<fw-exp-comb hidden type="comb5" data-type="comb5" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:24,column:57},end:{line:24,column:64}}}):n)+'"></fw-exp-comb>\n\t<fw-exp-comb hidden type="comb6" data-type="comb6" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:25,column:57},end:{line:25,column:64}}}):n)+'"></fw-exp-comb>\n\n\t<label>Size Factor:</label>\n\t<fw-input-range name="distance" min="0" max="1" value="0.5" step="0.05"></fw-input-range>\n\n\t<label>Elements Factor:</label>\n\t<fw-input-range name="elements" min="0" max="1" value="0.5" step="0.05"></fw-input-range>\n\t\n\t<button type="submit">Show</button>\n</form>'},useData:!0})},886:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){return'<fw-color-picker name="color" autofill></fw-color-picker>'},useData:!0})},781:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){return'<label>Color 1:</label>\n<fw-color-picker name="color1" autofill></fw-color-picker>\n\n<label>Color 2:</label>\n<fw-color-picker name="color2" autofill></fw-color-picker>'},useData:!0})},459:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){return'<label>Color:</label>\n<fw-color-picker name="color" autofill></fw-color-picker>'},useData:!0})},151:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){return'<label>Color 1:</label>\n<fw-color-picker name="color1" autofill></fw-color-picker>\n\n<label>Color 2:</label>\n<fw-color-picker name="color2" autofill></fw-color-picker>'},useData:!0})},357:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){return'<fw-color-picker name="color" autofill></fw-color-picker>'},useData:!0})},344:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){var n,s=null!=e?e:t.nullContext||{},a=t.hooks.helperMissing,l="function",h=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="random-fireworks">\n\t<button type="button">Random Firework</button>\n</div>\n<details>\n\t<summary>Explosions</summary>\n\t<fw-exp-form for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:6,column:19},end:{line:6,column:26}}}):n)+'"/>\n</details>\n<details>\n\t<summary>Rockets</summary>\n\t<fw-rockets-form for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:10,column:23},end:{line:10,column:30}}}):n)+'"/>\n</details>\n<details open>\n\t<summary>Output JSON</summary>\n\t<div class="output-json"></div>\n</details>'},useData:!0})},200:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){var n,s=null!=e?e:t.nullContext||{},a=t.hooks.helperMissing,l="function",h=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div>\n\t<input type="range" value="'+h(typeof(n=null!=(n=c(o,"value")||(null!=e?c(e,"value"):e))?n:a)===l?n.call(s,{name:"value",hash:{},data:i,loc:{start:{line:2,column:28},end:{line:2,column:37}}}):n)+'" min="'+h(typeof(n=null!=(n=c(o,"min")||(null!=e?c(e,"min"):e))?n:a)===l?n.call(s,{name:"min",hash:{},data:i,loc:{start:{line:2,column:44},end:{line:2,column:51}}}):n)+'" max="'+h(typeof(n=null!=(n=c(o,"max")||(null!=e?c(e,"max"):e))?n:a)===l?n.call(s,{name:"max",hash:{},data:i,loc:{start:{line:2,column:58},end:{line:2,column:65}}}):n)+'" step="'+h(typeof(n=null!=(n=c(o,"step")||(null!=e?c(e,"step"):e))?n:a)===l?n.call(s,{name:"step",hash:{},data:i,loc:{start:{line:2,column:73},end:{line:2,column:81}}}):n)+'">\n\t<span>'+h(typeof(n=null!=(n=c(o,"value")||(null!=e?c(e,"value"):e))?n:a)===l?n.call(s,{name:"value",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:16}}}):n)+"</span>\n</div>"},useData:!0})},924:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){var n,s=null!=e?e:t.nullContext||{},a=t.hooks.helperMissing,l="function",h=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<form action="#">\n\t<select name="type">\n\t\t<option value="type0">Type 0</option>\n\t\t<option value="type1" selected>Type 1</option>\n\t</select>\n\t<fw-rocket-type0 hidden data-type="type0" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:6,column:48},end:{line:6,column:55}}}):n)+'"></fw-rocket-type0>\n\t<fw-rocket-type1 hidden data-type="type1" for="'+h(typeof(n=null!=(n=c(o,"for")||(null!=e?c(e,"for"):e))?n:a)===l?n.call(s,{name:"for",hash:{},data:i,loc:{start:{line:7,column:48},end:{line:7,column:55}}}):n)+'"></fw-rocket-type1>\n\n\t<label>Angle Factor:</label>\n\t<fw-input-range name="angle" min="0" max="1" value="0.5" step="0.05"></fw-input-range>\n\n\t<label>Size Factor:</label>\n\t<fw-input-range name="distance" min="0" max="1" value="0.5" step="0.05"></fw-input-range>\n\n\t<button type="submit">Show</button>\n</form>'},useData:!0})},463:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){return'<fw-color-picker name="color" palette="rockets" autofill></fw-color-picker>'},useData:!0})},320:(t,e,o)=>{var r=o(202);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,o,r,i){return'<label>Color 1:</label>\n<fw-color-picker name="color1" palette="rockets" autofill></fw-color-picker>\n\n<label>Color 2:</label>\n<fw-color-picker name="color2" palette="rockets" autofill></fw-color-picker>'},useData:!0})},834:(t,e,o)=>{"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}e.__esModule=!0;var n=i(o(67)),s=r(o(558)),a=r(o(728)),l=i(o(392)),h=i(o(628)),c=r(o(982));function d(){var t=new n.HandlebarsEnvironment;return l.extend(t,n),t.SafeString=s.default,t.Exception=a.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=h,t.template=function(e){return h.template(e,t)},t}var u=d();u.create=d,c.default(u),u.default=u,e.default=u,t.exports=e.default},67:(t,e,o)=>{"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.HandlebarsEnvironment=d;var i=o(392),n=r(o(728)),s=o(638),a=o(881),l=r(o(37)),h=o(293);e.VERSION="4.7.6",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function d(t,e,o){this.helpers=t||{},this.partials=e||{},this.decorators=o||{},s.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}d.prototype={constructor:d,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(i.toString.call(t)===c){if(e)throw new n.default("Arg not supported with multiple helpers");i.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(i.toString.call(t)===c)i.extend(this.partials,t);else{if(void 0===e)throw new n.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(i.toString.call(t)===c){if(e)throw new n.default("Arg not supported with multiple decorators");i.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){h.resetLoggedProperties()}};var u=l.default.log;e.log=u,e.createFrame=i.createFrame,e.logger=l.default},881:(t,e,o)=>{"use strict";e.__esModule=!0,e.registerDefaultDecorators=function(t){i.default(t)};var r,i=(r=o(670))&&r.__esModule?r:{default:r}},670:(t,e,o)=>{"use strict";e.__esModule=!0;var r=o(392);e.default=function(t){t.registerDecorator("inline",(function(t,e,o,i){var n=t;return e.partials||(e.partials={},n=function(i,n){var s=o.partials;o.partials=r.extend({},s,e.partials);var a=t(i,n);return o.partials=s,a}),e.partials[i.args[0]]=i.fn,n}))},t.exports=e.default},728:(t,e)=>{"use strict";e.__esModule=!0;var o=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(t,e){var i=e&&e.loc,n=void 0,s=void 0,a=void 0,l=void 0;i&&(n=i.start.line,s=i.end.line,a=i.start.column,l=i.end.column,t+=" - "+n+":"+a);for(var h=Error.prototype.constructor.call(this,t),c=0;c<o.length;c++)this[o[c]]=h[o[c]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{i&&(this.lineNumber=n,this.endLineNumber=s,Object.defineProperty?(Object.defineProperty(this,"column",{value:a,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=a,this.endColumn=l))}catch(t){}}r.prototype=new Error,e.default=r,t.exports=e.default},638:(t,e,o)=>{"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.registerDefaultHelpers=function(t){i.default(t),n.default(t),s.default(t),a.default(t),l.default(t),h.default(t),c.default(t)},e.moveHelperToHooks=function(t,e,o){t.helpers[e]&&(t.hooks[e]=t.helpers[e],o||delete t.helpers[e])};var i=r(o(342)),n=r(o(822)),s=r(o(905)),a=r(o(405)),l=r(o(702)),h=r(o(593)),c=r(o(978))},342:(t,e,o)=>{"use strict";e.__esModule=!0;var r=o(392);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,o){var i=o.inverse,n=o.fn;if(!0===e)return n(this);if(!1===e||null==e)return i(this);if(r.isArray(e))return e.length>0?(o.ids&&(o.ids=[o.name]),t.helpers.each(e,o)):i(this);if(o.data&&o.ids){var s=r.createFrame(o.data);s.contextPath=r.appendContextPath(o.data.contextPath,o.name),o={data:s}}return n(e,o)}))},t.exports=e.default},822:(t,e,o)=>{"use strict";e.__esModule=!0;var r,i=o(392),n=(r=o(728))&&r.__esModule?r:{default:r};e.default=function(t){t.registerHelper("each",(function(t,e){if(!e)throw new n.default("Must pass iterator to #each");var r,s=e.fn,a=e.inverse,l=0,h="",c=void 0,d=void 0;function u(e,o,r){c&&(c.key=e,c.index=o,c.first=0===o,c.last=!!r,d&&(c.contextPath=d+e)),h+=s(t[e],{data:c,blockParams:i.blockParams([t[e],e],[d+e,null])})}if(e.data&&e.ids&&(d=i.appendContextPath(e.data.contextPath,e.ids[0])+"."),i.isFunction(t)&&(t=t.call(this)),e.data&&(c=i.createFrame(e.data)),t&&"object"==typeof t)if(i.isArray(t))for(var p=t.length;l<p;l++)l in t&&u(l,l,l===t.length-1);else if(o.g.Symbol&&t[o.g.Symbol.iterator]){for(var f=[],m=t[o.g.Symbol.iterator](),g=m.next();!g.done;g=m.next())f.push(g.value);for(p=(t=f).length;l<p;l++)u(l,l,l===t.length-1)}else r=void 0,Object.keys(t).forEach((function(t){void 0!==r&&u(r,l-1),r=t,l++})),void 0!==r&&u(r,l-1,!0);return 0===l&&(h=a(this)),h}))},t.exports=e.default},905:(t,e,o)=>{"use strict";e.__esModule=!0;var r,i=(r=o(728))&&r.__esModule?r:{default:r};e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},405:(t,e,o)=>{"use strict";e.__esModule=!0;var r,i=o(392),n=(r=o(728))&&r.__esModule?r:{default:r};e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new n.default("#if requires exactly one argument");return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,o){if(2!=arguments.length)throw new n.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:o.inverse,inverse:o.fn,hash:o.hash})}))},t.exports=e.default},702:(t,e)=>{"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],o=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var i=1;null!=o.hash.level?i=o.hash.level:o.data&&null!=o.data.level&&(i=o.data.level),e[0]=i,t.log.apply(t,e)}))},t.exports=e.default},593:(t,e)=>{"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,o){return t?o.lookupProperty(t,e):t}))},t.exports=e.default},978:(t,e,o)=>{"use strict";e.__esModule=!0;var r,i=o(392),n=(r=o(728))&&r.__esModule?r:{default:r};e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new n.default("#with requires exactly one argument");i.isFunction(t)&&(t=t.call(this));var o=e.fn;if(i.isEmpty(t))return e.inverse(this);var r=e.data;return e.data&&e.ids&&((r=i.createFrame(e.data)).contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),o(t,{data:r,blockParams:i.blockParams([t],[r&&r.contextPath])})}))},t.exports=e.default},572:(t,e,o)=>{"use strict";e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return r.extend.apply(void 0,[Object.create(null)].concat(e))};var r=o(392)},293:(t,e,o)=>{"use strict";e.__esModule=!0,e.createProtoAccessControl=function(t){var e=Object.create(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var o=Object.create(null);return o.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(o,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,o){return function(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==n[t]&&(n[t]=!0,i.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}("function"==typeof t?e.methods:e.properties,o)},e.resetLoggedProperties=function(){Object.keys(n).forEach((function(t){delete n[t]}))};var r=o(572),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(37)),n=Object.create(null)},5:(t,e)=>{"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){var o=arguments[arguments.length-1];return arguments[arguments.length-1]=e(o),t.apply(this,arguments)}}},37:(t,e,o)=>{"use strict";e.__esModule=!0;var r=o(392),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=r.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var o=arguments.length,r=Array(o>1?o-1:0),n=1;n<o;n++)r[n-1]=arguments[n];console[e].apply(console,r)}}};e.default=i,t.exports=e.default},982:(t,e,o)=>{"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==o.g?o.g:window,r=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=r),t}},t.exports=e.default},628:(t,e,o)=>{"use strict";e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,o=s.COMPILER_REVISION;if(!(e>=s.LAST_COMPATIBLE_COMPILER_REVISION&&e<=s.COMPILER_REVISION)){if(e<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[o],i=s.REVISION_CHANGES[e];throw new n.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new n.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){if(!e)throw new n.default("No environment passed to template");if(!t||!t.main)throw new n.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var o=t.compiler&&7===t.compiler[0],r={strict:function(t,e,o){if(!t||!(e in t))throw new n.default('"'+e+'" not defined in '+t,{loc:o});return t[e]},lookupProperty:function(t,e){var o=t[e];return null==o||Object.prototype.hasOwnProperty.call(t,e)||h.resultIsAllowed(o,r.protoAccessControl,e)?o:void 0},lookup:function(t,e){for(var o=t.length,i=0;i<o;i++)if(null!=(t[i]&&r.lookupProperty(t[i],e)))return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:i.escapeExpression,invokePartial:function(o,r,s){s.hash&&(r=i.extend({},r,s.hash),s.ids&&(s.ids[0]=!0)),o=e.VM.resolvePartial.call(this,o,r,s);var a=i.extend({},s,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=e.VM.invokePartial.call(this,o,r,a);if(null==l&&e.compile&&(s.partials[s.name]=e.compile(o,t.compilerOptions,e),l=s.partials[s.name](r,a)),null!=l){if(s.indent){for(var h=l.split("\n"),c=0,d=h.length;c<d&&(h[c]||c+1!==d);c++)h[c]=s.indent+h[c];l=h.join("\n")}return l}throw new n.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var o=t[e];return o.decorator=t[e+"_d"],o},programs:[],program:function(t,e,o,r,i){var n=this.programs[t],s=this.fn(t);return e||i||r||o?n=c(this,t,s,e,o,r,i):n||(n=this.programs[t]=c(this,t,s)),n},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var o=t||e;return t&&e&&t!==e&&(o=i.extend({},e,t)),o},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};function s(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=o.data;s._setup(o),!o.partial&&t.useData&&(i=u(e,i));var n=void 0,a=t.useBlockParams?[]:void 0;function l(e){return""+t.main(r,e,r.helpers,r.partials,i,a,n)}return t.useDepths&&(n=o.depths?e!=o.depths[0]?[e].concat(o.depths):o.depths:[e]),(l=p(t.main,l,r,o.depths||[],i,a))(e,o)}return s.isTop=!0,s._setup=function(n){if(n.partial)r.protoAccessControl=n.protoAccessControl,r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators,r.hooks=n.hooks;else{var s=i.extend({},e.helpers,n.helpers);!function(t,e){Object.keys(t).forEach((function(o){var r=t[o];t[o]=function(t,e){var o=e.lookupProperty;return l.wrapHelper(t,(function(t){return i.extend({lookupProperty:o},t)}))}(r,e)}))}(s,r),r.helpers=s,t.usePartial&&(r.partials=r.mergeIfNeeded(n.partials,e.partials)),(t.usePartial||t.useDecorators)&&(r.decorators=i.extend({},e.decorators,n.decorators)),r.hooks={},r.protoAccessControl=h.createProtoAccessControl(n);var c=n.allowCallsToHelperMissing||o;a.moveHelperToHooks(r,"helperMissing",c),a.moveHelperToHooks(r,"blockHelperMissing",c)}},s._child=function(e,o,i,s){if(t.useBlockParams&&!i)throw new n.default("must pass block params");if(t.useDepths&&!s)throw new n.default("must pass parent depths");return c(r,e,t[e],o,0,i,s)},s},e.wrapProgram=c,e.resolvePartial=function(t,e,o){return t?t.call||o.name||(o.name=t,t=o.partials[t]):t="@partial-block"===o.name?o.data["partial-block"]:o.partials[o.name],t},e.invokePartial=function(t,e,o){var r=o.data&&o.data["partial-block"];o.partial=!0,o.ids&&(o.data.contextPath=o.ids[0]||o.data.contextPath);var a=void 0;if(o.fn&&o.fn!==d&&function(){o.data=s.createFrame(o.data);var t=o.fn;a=o.data["partial-block"]=function(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o.data=s.createFrame(o.data),o.data["partial-block"]=r,t(e,o)},t.partials&&(o.partials=i.extend({},o.partials,t.partials))}(),void 0===t&&a&&(t=a),void 0===t)throw new n.default("The partial "+o.name+" could not be found");if(t instanceof Function)return t(e,o)},e.noop=d;var r,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(392)),n=(r=o(728))&&r.__esModule?r:{default:r},s=o(67),a=o(638),l=o(5),h=o(293);function c(t,e,o,r,i,n,s){function a(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(a=[e].concat(s)),o(t,e,t.helpers,t.partials,i.data||r,n&&[i.blockParams].concat(n),a)}return(a=p(o,a,t,s,r,n)).program=e,a.depth=s?s.length:0,a.blockParams=i||0,a}function d(){return""}function u(t,e){return e&&"root"in e||((e=e?s.createFrame(e):{}).root=t),e}function p(t,e,o,r,n,s){if(t.decorator){var a={};e=t.decorator(e,a,o,r&&r[0],n,s,r),i.extend(e,a)}return e}},558:(t,e)=>{"use strict";function o(t){this.string=t}e.__esModule=!0,o.prototype.toString=o.prototype.toHTML=function(){return""+this.string},e.default=o,t.exports=e.default},392:(t,e)=>{"use strict";e.__esModule=!0,e.extend=s,e.indexOf=function(t,e){for(var o=0,r=t.length;o<r;o++)if(t[o]===e)return o;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return i.test(t)?t.replace(r,n):t},e.isEmpty=function(t){return!t&&0!==t||!(!h(t)||0!==t.length)},e.createFrame=function(t){var e=s({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,i=/[&<>"'`=]/;function n(t){return o[t]}function s(t){for(var e=1;e<arguments.length;e++)for(var o in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],o)&&(t[o]=arguments[e][o]);return t}var a=Object.prototype.toString;e.toString=a;var l=function(t){return"function"==typeof t};l(/x/)&&(e.isFunction=l=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)}),e.isFunction=l;var h=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===a.call(t)};e.isArray=h},202:(t,e,o)=>{t.exports=o(834).default}},e={};function o(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t extends HTMLElement{constructor(){super(),this.checkedAttributes=new Map}static get observedAttributes(){return[]}createShadowDom(t="",e=""){this.attachShadow({mode:"open"}),""!==t&&(t=`<style>${t}</style>`),this.shadowRoot.innerHTML=`${t}${e}`}handleAttributesChange(){}attributeChangedCallback(t,e,o){let r="";this.checkedAttributes.has(t)?r=this.checkedAttributes.get(t):(r="handle"+t.split("-").map((t=>t.substr(0,1).toUpperCase()+t.substr(1))).join("")+"Change",r in this||(r=""),this.checkedAttributes.set(t,r)),""!==r&&this[r](),this.handleAttributesChange()}}class e{constructor(t,e){this.nextRenderId=0,this.started=!1,this.nextFrameTime=0,this.needRender=!1,this.bgImage=null,this.bgColor="",this.globalOpacity=0,this.glowTime=0,this.renderList=t,this.context=e,this.requestNextRender=window.requestAnimationFrame,this.renderCallback=this.render.bind(this),this.renderObservers=new Set,this.nextRenderHandlers=new Set}get canvas(){return this.context.canvas}get backgroundColor(){return this.bgColor}set backgroundColor(t){this.bgColor=t,this.requestRender()}setBackgroundImage(t){return""===t?(this.bgImage=null,this.requestRender(),Promise.resolve()):new Promise((e=>{const o=new Image;o.addEventListener("load",(()=>{this.bgImage=o,this.requestRender(),e()})),o.crossOrigin="anonymous",o.src=t}))}useGlowTail(){if(this.glowCanvas)return;const t=this.context.canvas;this.glowCanvas=document.createElement("canvas"),this.glowCanvas.width=t.width,this.glowCanvas.height=t.height,this.glowCanvasContext=this.glowCanvas.getContext("2d")}start(){return this.started&&this.finish(),this.glowTime=0,this.globalOpacity=0,this.started=!0,this.render(),this}finish(){return this.started=!1,window.cancelAnimationFrame(this.nextRenderId),this}observe(t){this.renderObservers.add(t)}requestRender(t=null){this.needRender=!0,null!==t&&this.nextRenderHandlers.add(t)}render(){const t=Date.now();if(this.nextRenderId=this.requestNextRender.call(window,this.renderCallback),t<this.nextFrameTime)return;this.nextFrameTime=t+41,this.renderList.interrupt(),this.nextRenderHandlers.size>0&&(this.nextRenderHandlers.forEach((t=>t())),this.nextRenderHandlers.clear());const e=this.context.canvas;!this.renderList.needRender&&!this.needRender&&this.globalOpacity>=1&&0===this.glowTime||(this.globalOpacity<1&&(this.globalOpacity+=.1),this.prepareCanvasBeforeRender(),(this.renderList.needRender||this.needRender)&&this.glowCanvas&&(this.glowTime=5),this.context.globalAlpha=this.globalOpacity,this.bgColor&&(this.context.fillStyle=this.bgColor,this.context.fillRect(0,0,e.width,e.height)),this.drawBgImage(),this.needRender=!1,this.renderList.render(this.context),this.renderObservers.size>0&&this.renderObservers.forEach((t=>t())))}prepareCanvasBeforeRender(){const t=this.context.canvas;this.glowCanvasContext&&this.glowTime>1?(this.glowCanvas.width===t.width&&this.glowCanvas.height===t.height||(this.glowCanvas.width=t.width,this.glowCanvas.height=t.height),this.glowCanvasContext.clearRect(0,0,t.width,t.height),this.glowCanvasContext.drawImage(t,0,0),this.context.clearRect(0,0,t.width,t.height),this.context.globalAlpha=.5,this.context.drawImage(this.glowCanvas,0,0),this.context.globalAlpha=1,this.glowTime--):this.context.clearRect(0,0,t.width,t.height)}drawBgImage(){if(!this.bgImage||!this.bgImage.complete||0===this.bgImage.naturalWidth)return;const t=this.bgImage.naturalWidth,e=this.canvas.height-this.bgImage.naturalHeight,o=Math.ceil(this.canvas.width/t);for(let r=0;r<o;r++)this.context.drawImage(this.bgImage,r*t,e)}}class r{constructor(){this.isChangedByInterruption=!1,this.isChangedList=!1,this.list=new Set,this.waitList=new Set,this.beforeRenderCallbacks=new WeakMap,this.afterRenderCallbacks=new WeakMap}clear(){this.list.clear(),this.waitList.clear(),this.isChangedList=!0}add(t,e=0,o=null,r=null){return e>0?this.waitList.add({element:t,wait:e}):this.list.add(t),"function"==typeof o&&this.beforeRenderCallbacks.set(t,o),"function"==typeof r&&this.afterRenderCallbacks.set(t,r),this.isChangedList=!0,this}remove(t){for(const e of this.waitList)if(e.element===t){this.waitList.delete(e);break}return this.list.delete(t),this.isChangedList=!0,this}getBoundingRect(){const t={x:Number.MAX_VALUE,y:Number.MAX_VALUE},e={x:0,y:0};for(const o of this.list){const{x:r,y:i,width:n,height:s}=o.getBoundingRect();t.x=Math.min(t.x,r),t.y=Math.min(t.y,i),e.x=Math.max(e.x,r+n),e.y=Math.max(e.y,i+s)}return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}}getElementUnderPoint(t){for(const e of[...this.list].reverse()){const{x:o,y:r,width:i,height:n}=e.getBoundingRect();if(t.x>o&&t.x<o+i&&t.y>r&&t.y<r+n)return e}return null}get isEnded(){return!(this.waitList.size>0)&&(0===this.list.size||[...this.list].every((t=>t.isEnded)))}get needRender(){return this.isChangedByInterruption||this.isChangedList}interrupt(){let t=!1;for(const e of this.list)e.isEnded?(this.list.delete(e),t=!0):e.interrupt()&&(t=!0);for(const e of this.waitList)0==--e.wait&&(this.waitList.delete(e),this.list.add(e.element),t=!0);return this.isChangedByInterruption=t,t}render(t){this.isChangedList=!1,this.isChangedByInterruption=!1;for(const e of this.list)this.beforeRenderCallbacks.has(e)&&(t.save(),this.beforeRenderCallbacks.get(e)(t),t.restore()),t.save(),e.render(t),t.restore(),this.afterRenderCallbacks.has(e)&&(t.save(),this.afterRenderCallbacks.get(e)(t),t.restore())}}const i=Math.PI/180,n=180/Math.PI,s=2*Math.PI,a=Math.PI/2;function l(t,e=1,o=0){return Math.max(o,Math.max(o,t))}function h(t,e=0,o){return e+t*(o-e)}function c(t=1e3){return Math.round(Math.random()*t)/t}function d(t,e=0){return e+Math.random()*(t-e)}function u(t,e,o,r){const i=1-t,n=i**2,s=t**2;return{x:n*e.x+2*i*t*o.x+s*r.x,y:n*e.y+2*i*t*o.y+s*r.y}}const p=new Map;var f;!function(t){t.LAUNCH_1="launch-1.mp3",t.EXPLOSION_1="explosion-1.mp3",t.EXPLOSION_2="explosion-2.mp3",t.EXPLOSION_FIZZ="explosion-fizz.mp3"}(f||(f={}));let m=.3,g=!1;class v{constructor(t){this.fileName=t,this.wasPlayed=!1,this.canPlay=!0,this.isLoading=!1,this.filePath=v.assetsUrl+"/"+this.fileName,p.has(this.filePath)&&(this.audio=p.get(this.filePath).cloneNode(!0),this.audio.volume=m)}static get disabled(){return g}static set disabled(t){g=t}static muteAll(t){m=t?0:.3}play(){return!(!g&&!this.wasPlayed&&this.canPlay&&(this.isLoading||this.playWhenReady().then(),1))}preloadFile(){if(p.has(this.filePath))return;const t=new Audio;t.volume=m,t.autoplay=!1,t.src=this.filePath,p.set(this.filePath,t)}async playWhenReady(){g||(this.isLoading=!0,p.has(this.filePath)||this.preloadFile(),this.audio||(this.audio=p.get(this.filePath).cloneNode(!0)),this.audio.volume=m,this.wasPlayed=!0,await this.audio.play(),this.isLoading=!1)}}v.assetsUrl="./sounds";const w=["#ff5b5b","#ffd449","#c4ff21","#21ff60","#21f8ff","#41b4ff","#d466ff","#ff66c2","#ffffe7"],b="#fff",y=["#a95e47","#bca047","#819d4a","#7ed070","#73bbc8","#8a8bf5","#ab80bc","#ec2f8d","#acaca3"];function x(t,e=w){const o=[...e];t=Math.min(t,o.length);const r=[];for(;t-- >0;)r.push(o.splice(Math.round(1e3*Math.random())%o.length,1)[0]);return r}var k;!function(t){t[t.MIN_PEAKS=9]="MIN_PEAKS",t[t.MAX_PEAKS=15]="MAX_PEAKS",t[t.MIN_DISTANCE=20]="MIN_DISTANCE",t[t.MAX_DISTANCE=40]="MAX_DISTANCE"}(k||(k={}));class M{constructor(t){var e,o;this.sound=null,this.stage=0,this.opacity=1,this.angleStepDeg=0,this.glowRadius1=5,this.glowRadius2=10,this.pos=t.position||{x:0,y:0},this.color=(null==t?void 0:t.colors[0])||b,this.distance=h(null!==(e=t.sizeFactor)&&void 0!==e?e:.5,k.MIN_DISTANCE,k.MAX_DISTANCE),this.angleStepDeg=360/(2*h(null!==(o=t.elementsFactor)&&void 0!==o?o:.5,k.MIN_PEAKS,k.MAX_PEAKS)),t.noSound||(this.sound=new v(f.EXPLOSION_1))}getBoundingRect(){const t=this.distance>>1;return{x:this.pos.x-t,y:this.pos.y-t,width:this.distance,height:this.distance}}get isEnded(){return this.stage>=3}interrupt(){var t;if(!1===(null===(t=this.sound)||void 0===t?void 0:t.play()))return!1;switch(this.stage){case 0:this.pathGlow=this.generatePath(1,180*Math.random()),this.pathLight=this.generatePath(.5,180*Math.random()),this.glowRadius1=.3*this.distance,this.glowRadius2=.7*this.distance;break;case 1:this.pathGlow=this.generatePath(2,180*Math.random()),this.pathLight=this.generatePath(1,180*Math.random()),this.glowRadius1=.5*this.distance,this.glowRadius2=1.2*this.distance;break;case 2:this.pathGlow=null,this.pathLight=this.generatePath(.5,180*Math.random()),this.glowRadius1=this.distance,this.glowRadius2=2*this.distance,this.opacity=.4}return++this.stage,!0}render(t){if(t.translate(this.pos.x,this.pos.y),this.glowRadius2>0){const e=t.createRadialGradient(0,0,this.glowRadius1,0,0,this.glowRadius2);e.addColorStop(0,"rgba(255, 255, 255, 0.3)"),e.addColorStop(1,"rgba(255, 255, 255, 0)"),t.globalAlpha=this.opacity,t.fillStyle=e,t.fillRect(-this.glowRadius2,-this.glowRadius2,this.glowRadius2<<1,this.glowRadius2<<1)}this.pathGlow&&(t.fillStyle=this.color,t.globalAlpha=.7*this.opacity,M.drawPath(this.pathGlow,t)),this.pathLight&&(t.fillStyle="#ffffff",t.globalAlpha=this.opacity,M.drawPath(this.pathLight,t))}static drawPath(t,e){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.closePath(),e.fill()}generatePath(t,e=0){const o=this.distance*t,r=.3*o,n=Math.floor(360/this.angleStepDeg),s=[];for(let t=0;t<n;t++){let n=e+this.angleStepDeg*t;n+=this.angleStepDeg*(.3*Math.random()-.3),n*=i;let a=1==(1&t)?r:o;a*=.4+.6*Math.random(),s.push({x:a*Math.cos(n),y:a*Math.sin(n)})}return s}}const E=.05;class C{constructor(t=20,e=2){this.length=t,this.pointSize=e,this.points=[],this.halfSize=e/2,this.opacityStep=1/t}addPoint(t){if(0===this.points.length)return this.points.push({...t,opacity:1}),this;const e=this.points[0],o=t.x-e.x,r=t.y-e.y,i=Math.ceil(Math.max(Math.abs(o),Math.abs(r))/this.pointSize);if(i<=1)return this.points.unshift({...t,opacity:1}),this;const n=o/i,s=r/i,a=(1-e.opacity)/i;for(let t=1;t<=i;t++)this.points.unshift({x:e.x+n*t,y:e.y+s*t,opacity:e.opacity+a*t});return this}getBoundingRect(){const t={x:Number.MAX_VALUE,y:Number.MAX_VALUE},e={x:0,y:0};for(const o of this.points)t.x=Math.min(t.x,o.x),t.y=Math.min(t.y,o.y),e.x=Math.max(e.x,o.x),e.y=Math.max(e.y,o.y);return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}}get isEnded(){for(const t of this.points)if(t.opacity>E)return!1;return!0}interrupt(){this.points.length>300&&this.points.splice(200);for(const t of this.points){if(t.opacity<=E)break;t.opacity/=2}return!0}render(t){let e=1;for(let o=0;o<this.points.length&&o<this.length;o++){const r=this.points[o];if(r.opacity<=E)break;t.globalAlpha=e>r.opacity?r.opacity:e,t.fillRect(r.x-this.halfSize,r.y-this.halfSize,this.pointSize,this.pointSize),e-=this.opacityStep}}}class S{constructor(t,e,o){var r,i;this.distance=e,this.sound=null,this.time=0,this.value=0,this.duration=0,this.opacity=1,this.elements=[],this.colors=t.colors||[b],this.pos={...t.position||{x:0,y:0}},this.elements=this.generateElements(o),this.explosionType0=new M({colors:[this.colors[0]],position:this.pos,sizeFactor:null!==(r=t.sizeFactor)&&void 0!==r?r:.5,elementsFactor:null!==(i=t.elementsFactor)&&void 0!==i?i:.5,noSound:!0}),t.noSound||(this.sound=new v(f.EXPLOSION_2))}getRandomColor(){return this.colors[Math.ceil(1e3*Math.random())%this.colors.length]}getBoundingRect(){const t=this.distance>>1;return{x:this.pos.x-t,y:this.pos.y-t,width:this.distance,height:this.distance}}get isEnded(){var t,e;if(this.time<this.duration)return!1;for(const e of this.elements)if(!1===(null===(t=e.tail)||void 0===t?void 0:t.isEnded))return!1;return!1!==(null===(e=this.explosionType0)||void 0===e?void 0:e.isEnded)}interrupt(){var t,e,o,r;if(!1===(null===(t=this.sound)||void 0===t?void 0:t.play()))return!1;for(const t of this.elements)null===(e=t.tail)||void 0===e||e.interrupt();if(this.explosionType0&&(this.explosionType0.isEnded?this.explosionType0=null:this.explosionType0.interrupt()),this.time>=this.duration)return!0;this.value=1===(r=Math.min(1,this.time/this.duration))?1:1-Math.pow(2,-10*r);const i=1*this.time;for(const t of this.elements){const e=this.value*t.distance;t.x=t.xFactor*e+t.xFactor*i,t.y=t.yFactor*e+i,null===(o=t.tail)||void 0===o||o.addPoint({x:t.x,y:t.y})}return this.time>=this.duration-10&&(this.opacity=(this.duration-this.time)/10),++this.time,!0}render(t){var e;if(t.save(),t.translate(this.pos.x,this.pos.y),this.time<this.duration){t.globalAlpha=.3*this.opacity;for(const e of this.elements)t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,6,0,s),t.fill()}for(const o of this.elements)t.fillStyle=o.color,null===(e=o.tail)||void 0===e||e.render(t);if(this.time<this.duration){t.globalAlpha=this.opacity,t.fillStyle="#fff";for(const e of this.elements)t.fillRect(e.x-1,e.y-1,2,2)}t.restore(),this.explosionType0&&this.explosionType0.render(t)}}var A;!function(t){t[t.MIN_ELEMENTS=10]="MIN_ELEMENTS",t[t.MAX_ELEMENTS=50]="MAX_ELEMENTS",t[t.MIN_DISTANCE=100]="MIN_DISTANCE",t[t.MAX_DISTANCE=300]="MAX_DISTANCE"}(A||(A={}));class _ extends S{constructor(t){var e,o;super(t,h(null!==(e=t.sizeFactor)&&void 0!==e?e:.5,A.MIN_DISTANCE,A.MAX_DISTANCE),h(null!==(o=t.elementsFactor)&&void 0!==o?o:.5,A.MIN_ELEMENTS,A.MAX_ELEMENTS)),this.duration=15}generateElements(t){let e=0;const o=360/t,r=[];for(let n=0;n<t;n++)e=o*n,e+=o*(.4*Math.random()*2-.4),e*=i,r.push({distance:this.distance*(.5+.5*Math.random()),xFactor:Math.cos(e),yFactor:Math.sin(e),tail:new C(30,2).addPoint({x:0,y:0}),color:this.getRandomColor(),x:0,y:0});return r}}var F,P,I;!function(t){t[t.MIN_ELEMENTS=15]="MIN_ELEMENTS",t[t.MAX_ELEMENTS=30]="MAX_ELEMENTS",t[t.MIN_DISTANCE=130]="MIN_DISTANCE",t[t.MAX_DISTANCE=300]="MAX_DISTANCE"}(F||(F={}));class N extends S{constructor(t){var e,o;super(t,h(null!==(e=t.sizeFactor)&&void 0!==e?e:.5,F.MIN_DISTANCE,F.MAX_DISTANCE),h(null!==(o=t.elementsFactor)&&void 0!==o?o:.5,F.MIN_ELEMENTS,F.MAX_ELEMENTS)),this.duration=20}generateElements(t){const e=[],o=Math.PI/t;let r=0;for(let i=0;i<t;i++){const n=o*i,s=Math.cos(n),a=Math.sin(n),l=Math.max(1,Math.ceil(t*a)),h=Math.PI/l;for(let t=0;t<l;t++){let o=a*Math.cos(h*t);o+=.02*Math.random()*2-.02;const i=s+(.02*Math.random()*2-.02),n=++r%3==0;e.push({x:0,y:0,distance:this.distance*(.05*Math.random()*2-.05+1),xFactor:o,yFactor:i,color:this.getRandomColor(),tail:n?new C(9,2).addPoint({x:0,y:0}):null})}}return e}}!function(t){t[t.MIN_ELEMENTS=30]="MIN_ELEMENTS",t[t.MAX_ELEMENTS=60]="MAX_ELEMENTS",t[t.MIN_DISTANCE=200]="MIN_DISTANCE",t[t.MAX_DISTANCE=300]="MAX_DISTANCE"}(P||(P={}));class R extends S{constructor(t){var e,o;super(t,h(null!==(e=t.sizeFactor)&&void 0!==e?e:.5,P.MIN_DISTANCE,P.MAX_DISTANCE),h(null!==(o=t.elementsFactor)&&void 0!==o?o:.5,P.MIN_ELEMENTS,P.MAX_ELEMENTS)),this.duration=15}generateElements(t){let e=0;const o=360/t,r=[],n=Math.random()*s,a=Math.cos(n),l=Math.sin(n);for(let n=0;n<t;n++){e=o*n,e+=o*(.1*Math.random()*2-.1),e*=i;let t=Math.cos(e),s=Math.sin(e)/5;r.push({distance:this.distance,xFactor:t*a-s*l,yFactor:t*l+s*a,tail:new C(6,2).addPoint({x:0,y:0}),color:this.getRandomColor(),x:0,y:0})}return r}}!function(t){t[t.MIN_ELEMENTS=15]="MIN_ELEMENTS",t[t.MAX_ELEMENTS=50]="MAX_ELEMENTS",t[t.MIN_DISTANCE=100]="MIN_DISTANCE",t[t.MAX_DISTANCE=300]="MAX_DISTANCE"}(I||(I={}));class T{constructor(t){var e,o;this.time=0,this.points=[],this.pos=t.position||{x:0,y:0},this.color=t.colors[0]||b,this.elementsCount=h(null!==(e=t.elementsFactor)&&void 0!==e?e:.5,I.MIN_ELEMENTS,I.MAX_ELEMENTS),this.distance=h(null!==(o=t.sizeFactor)&&void 0!==o?o:.5,I.MIN_DISTANCE,I.MAX_DISTANCE)}getBoundingRect(){const t=this.distance>>1;return{x:this.pos.x-t,y:this.pos.y-t,width:this.distance,height:this.distance}}get isEnded(){return this.elementsCount<=0}interrupt(){this.points=[];for(let t=0;t<this.elementsCount;t++){const t=Math.random()*s,e=Math.random()*this.distance;this.points.push({x:Math.cos(t)*e,y:Math.sin(t)*e})}return this.pos.y+=2,this.elementsCount-=2,!0}render(t){t.translate(this.pos.x,this.pos.y),t.globalAlpha=.5,t.fillStyle=this.color;for(const e of this.points)t.fillRect(e.x-1,e.y-4,2,8),t.fillRect(e.x-4,e.y-1,8,2);t.fillStyle="#fff",t.globalAlpha=1;for(const e of this.points)t.fillRect(e.x-1,e.y-1,2,2)}}const L=Math.ceil(12),O="#fff8df";var D;!function(t){t[t.WAIT=0]="WAIT",t[t.INCREASE_SPARK=1]="INCREASE_SPARK",t[t.LAUNCH=2]="LAUNCH",t[t.EXPLOSION=3]="EXPLOSION"}(D||(D={}));class H{constructor(t,e=null,o=0,r=4,i=10,n=15){this.canvas=e,this.angle=o,this.width=r,this.height=i,this.duration=n,this.sparks=[],this.time=0,this.stage=D.WAIT,this.sparkValue=0,this.prevValue=0,this.opacity=1,this.canBeLaunched=!0,this.pos=t.position||{x:0,y:0},this.fromPos={...this.pos},this.widthHalf=this.width/2,this.widthQuarter=this.width/4,this.heightHalf=this.height/2,this.heightQuarter=this.height/4,this.tail=new C(60,2),this.generateFinalPos(),this.generateAnchorPos(),"function"==typeof t.onLaunch&&(this.launchCallback=t.onLaunch),!1===t.canBeLaunched&&(this.canBeLaunched=!1),!0===t.autoLaunch&&this.launch(),!0===t.rocketFading&&(this.opacity=0)}getBoundingRect(){return{x:this.pos.x-(this.width<<1),y:this.pos.y-(this.height<<1),width:this.width<<2,height:this.height<<2}}get isEnded(){return this.stage===D.EXPLOSION&&this.tail.isEnded}launch(){return this.canBeLaunched?(this.stage===D.WAIT&&(this.stage=D.INCREASE_SPARK),this.launchCallback&&this.launchCallback(),this):this}interrupt(){var t;return this.opacity<1&&(this.opacity=Math.min(1,this.opacity+.1)),this.stage===D.WAIT?this.opacity<1:!1!==(null===(t=this.sound)||void 0===t?void 0:t.play())&&(this.stage!==D.INCREASE_SPARK&&this.tail.interrupt(),this.moveRocket(),this.generateSparks(),!0)}render(t){this.stage>D.INCREASE_SPARK&&(t.save(),t.fillStyle=O,this.tail.render(t),t.restore()),this.stage!==D.EXPLOSION&&(t.translate(this.pos.x,this.pos.y),t.globalAlpha=this.opacity,t.rotate(this.angle*i),this.drawRocket(t),this.stage===D.INCREASE_SPARK&&(this.sparkValue+=.1,this.sparkValue>=1&&(this.sparkValue=1,this.stage=D.LAUNCH)),this.stage>D.WAIT&&this.drawSparks(t),this.drawWings(t))}moveRocket(){if(this.stage!==D.LAUNCH)return;if(++this.time,this.time>this.duration)return this.stage=D.EXPLOSION,void(this.finishCallback&&this.finishCallback(this.pos));let t=this.time/this.duration;var e;if(t=(e=t)*e*e,t>.2)for(let e=this.prevValue;e<t;e+=.05)this.tail.addPoint(u(e,this.fromPos,this.anchorPos,this.toPos));this.prevValue=t;const o=u(t,this.fromPos,this.anchorPos,this.toPos);var r,i;this.angle=(r=o,i=this.pos,-Math.atan2(i.x-r.x,i.y-r.y)*n),this.pos=o}generateSparks(){if([D.INCREASE_SPARK,D.LAUNCH].includes(this.stage)){this.sparks=[];for(let t=0;t<20;t++){const t=a+15*(2*Math.random()-1)*i;let e=4+.5*Math.random()*4;e*=this.sparkValue;let o=30*Math.random();o*=this.sparkValue;const r=Math.cos(t),n=Math.sin(t),s=-this.widthHalf+Math.random()*this.width;this.sparks.push({x1:o*r+s,y1:o*n,x2:(o+e)*r+s,y2:(o+e)*n})}}}drawSparks(t){this.sparkGradient||(this.sparkGradient=t.createLinearGradient(-this.widthHalf+this.widthQuarter,0,this.width-this.widthHalf,12),this.sparkGradient.addColorStop(0,O),this.sparkGradient.addColorStop(.2,"rgba(255, 248, 223, 0.8)"),this.sparkGradient.addColorStop(1,"rgba(255, 248, 223, 0)")),t.fillStyle=this.sparkGradient,t.fillRect(-this.widthHalf+this.widthQuarter,0,this.width-this.widthHalf,12*this.sparkValue),t.strokeStyle=O,t.beginPath();for(const e of this.sparks)t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2);t.stroke()}generateAnchorPos(){const t=a+this.angle*i,e=Math.max(200,Math.min(400,200-this.fromPos.y));this.anchorPos={x:this.fromPos.x-Math.cos(t)*e,y:this.fromPos.y-Math.sin(t)*e}}generateFinalPos(){if(!this.canvas)return void(this.toPos={x:0,y:0});const t=Math.max(100,this.fromPos.x-300),e=Math.min(this.canvas.width-100,this.fromPos.x+300),o=Math.min(300,this.canvas.height-100);this.toPos={x:t+Math.round(Math.random()*(e-t)),y:200+Math.round(Math.random()*(o-200))}}}const B="#0e0e0e";var z;!function(t){t[t.MIN_ANGLE=-45]="MIN_ANGLE",t[t.MAX_ANGLE=45]="MAX_ANGLE",t[t.MIN_SIZE=1]="MIN_SIZE",t[t.MAX_SIZE=1.5]="MAX_SIZE"}(z||(z={}));const X="#404040";var j,V,q,G;!function(t){t[t.MIN_ANGLE=-45]="MIN_ANGLE",t[t.MAX_ANGLE=45]="MAX_ANGLE",t[t.MIN_SIZE=1]="MIN_SIZE",t[t.MAX_SIZE=1.3]="MAX_SIZE"}(j||(j={})),function(t){t.TYPE0="type0",t.TYPE1_CIRCLE="type1-circle",t.TYPE1_SPHERE="type1-sphere",t.TYPE1_DISK="type1-disk",t.TYPE2="type2"}(V||(V={})),function(t){t.COMB1="comb1",t.COMB2="comb2",t.COMB3="comb3",t.COMB4="comb4",t.COMB5="comb5",t.COMB6="comb6"}(q||(q={})),function(t){t.TYPE0="type0",t.TYPE1="type1"}(G||(G={}));const Q={[V.TYPE0]:M,[V.TYPE1_CIRCLE]:_,[V.TYPE1_SPHERE]:N,[V.TYPE1_DISK]:R,[V.TYPE2]:T,[q.COMB1]:class extends r{constructor(t){var e,o,r,i;super();const n=t.colors||x(1+Math.ceil(1e3*Math.random())%3),s=x(1)[0],a=new _({colors:n,position:t.position||{x:0,y:0},sizeFactor:null!==(e=t.sizeFactor)&&void 0!==e?e:.5,elementsFactor:null!==(o=t.elementsFactor)&&void 0!==o?o:.5});t.noSound||(a.sound=new v(f.EXPLOSION_FIZZ));const l=new T({colors:[s],position:t.position||{x:0,y:0},sizeFactor:null!==(r=t.sizeFactor)&&void 0!==r?r:.5,elementsFactor:null!==(i=t.elementsFactor)&&void 0!==i?i:.5});this.add(a),this.add(l,Math.round(10.5))}},[q.COMB2]:class extends r{constructor(t){var e,o,r;super();const i=t.colors||x(1+Math.ceil(1e3*Math.random())%2),n=h(null!==(e=t.sizeFactor)&&void 0!==e?e:.5,A.MIN_DISTANCE,A.MAX_DISTANCE),a=t.position||{x:0,y:0},l=new _({colors:i,position:a,sizeFactor:null!==(o=t.sizeFactor)&&void 0!==o?o:.5,elementsFactor:null!==(r=t.elementsFactor)&&void 0!==r?r:.5});this.add(l);const c=x(2);let d=Math.ceil(6);const u=n/2;for(let t=0;t<5;t++){const e=Math.random()*s,o=Math.random()*u,r=new M({colors:[c[t%2]],position:{x:a.x+Math.cos(e)*o,y:a.y+Math.sin(e)*o},sizeFactor:0,elementsFactor:0});this.add(r,d),d+=Math.ceil(3*Math.random())}}},[q.COMB3]:class extends r{constructor(t){var e,o,r,i;super();const n=t.colors||x(1+Math.ceil(1e3*Math.random())%3),s=t.colors||x(1+Math.ceil(1e3*Math.random())%2),a=new _({colors:n,position:t.position||{x:0,y:0},sizeFactor:null!==(e=t.sizeFactor)&&void 0!==e?e:.5,elementsFactor:null!==(o=t.elementsFactor)&&void 0!==o?o:.5});this.add(a);const l=new R({colors:s,position:t.position||{x:0,y:0},sizeFactor:null!==(r=t.sizeFactor)&&void 0!==r?r:.5,elementsFactor:null!==(i=t.elementsFactor)&&void 0!==i?i:.5});l.sound=null,this.add(l,2)}},[q.COMB4]:class extends r{constructor(t){var e;super();const o=t.colors||x(3),r=new M({colors:[o[0]],position:t.position||{x:0,y:0},sizeFactor:null!==(e=t.sizeFactor)&&void 0!==e?e:.5,elementsFactor:0});this.add(r);const i=h(t.sizeFactor,F.MIN_DISTANCE,F.MAX_DISTANCE)/2,n=t.position||{x:0,y:0};for(let e=0;e<o.length;e++){const r=Math.random()*s,a=Math.random()*i,l=new N({colors:[o[e]],position:{x:n.x+Math.cos(r)*a,y:n.y+Math.sin(r)*a},sizeFactor:t.sizeFactor,elementsFactor:t.elementsFactor});this.add(l,5+3*e)}}},[q.COMB5]:class extends r{constructor(t){var e,o,r;super();const i=t.colors||x(1+Math.ceil(1e3*Math.random())%3),n=new N({colors:i,position:t.position||{x:0,y:0},sizeFactor:null!==(e=t.sizeFactor)&&void 0!==e?e:.5,elementsFactor:null!==(o=t.elementsFactor)&&void 0!==o?o:.5});t.noSound||(n.sound=new v(f.EXPLOSION_FIZZ)),this.add(n);const s=new T({colors:["#ffffe7"],position:t.position||{x:0,y:0},sizeFactor:null!==(r=t.sizeFactor)&&void 0!==r?r:.5,elementsFactor:1});this.add(s,L)}},[q.COMB6]:class extends r{constructor(t){var e,o,r,i;super();const n=x(d(2,5)),s=new M({colors:[n[0]],position:t.position||{x:0,y:0},sizeFactor:null!==(e=t.sizeFactor)&&void 0!==e?e:.5,elementsFactor:null!==(o=t.elementsFactor)&&void 0!==o?o:.5});t.noSound||(s.sound=new v(f.EXPLOSION_2)),this.add(s);for(let e=0;e<n.length;e++){const o=new R({colors:[n[e]],position:t.position||{x:0,y:0},sizeFactor:(null!==(r=t.sizeFactor)&&void 0!==r?r:.5)*d(.6,1.2),elementsFactor:null!==(i=t.elementsFactor)&&void 0!==i?i:.5});o.sound=null,this.add(o,e)}}}},U={[G.TYPE0]:class extends H{constructor(t,e=null){var o,r;const i=h(null!==(o=t.sizeFactor)&&void 0!==o?o:.5,z.MIN_SIZE,z.MAX_SIZE);super(t,e,h(null!==(r=t.angleFactor)&&void 0!==r?r:.5,z.MIN_ANGLE,z.MAX_ANGLE),6*i,18*i),this.color=t.rocketColors&&t.rocketColors[0]||x(1,y)[0],t.noSound||(this.sound=new v(f.LAUNCH_1))}drawRocket(t){t.fillStyle=B,t.beginPath(),t.moveTo(-this.widthHalf,-this.height),t.lineTo(0,-this.height-this.width),t.lineTo(this.widthHalf,-this.height),t.lineTo(-this.widthHalf,-this.height),t.closePath(),t.fill(),t.fillStyle=this.color,t.strokeStyle="#404040",t.beginPath(),t.rect(-this.widthHalf,-this.height,this.width,this.height),t.closePath(),t.stroke(),t.fill(),t.fillStyle=B,t.fillRect(-this.widthHalf,-4,this.width,4),t.fillStyle="rgba(255, 255, 255, 0.3)",t.fillRect(-this.widthQuarter,-this.height,this.widthHalf,this.height),t.fillStyle="#999173",t.fillRect(-this.widthHalf,0,2,20)}drawWings(t){}},[G.TYPE1]:class extends H{constructor(t,e=null){var o,r;const i=h(null!==(o=t.sizeFactor)&&void 0!==o?o:.5,j.MIN_SIZE,j.MAX_SIZE);super(t,e,h(null!==(r=t.angleFactor)&&void 0!==r?r:.5,j.MIN_ANGLE,j.MAX_ANGLE),8*i,20*i),this.color1=t.rocketColors&&t.rocketColors[0]||x(1,y)[0],this.color2=t.rocketColors&&t.rocketColors[1]||x(1,y)[0],t.noSound||(this.sound=new v(f.LAUNCH_1))}drawRocket(t){t.fillStyle=this.color1,t.strokeStyle=X,t.beginPath(),t.moveTo(-this.widthHalf-this.widthQuarter,-this.height),t.lineTo(0,-this.height-this.width-this.widthQuarter),t.lineTo(this.widthHalf+this.widthQuarter,-this.height),t.lineTo(-this.widthHalf-this.widthQuarter,-this.height),t.closePath(),t.fill(),t.stroke(),t.beginPath(),t.rect(-this.widthHalf,-this.height,this.width,this.height),t.closePath(),t.fill(),t.fillStyle=this.color2,t.fillRect(-this.widthHalf,-this.height,this.width,this.heightQuarter),t.fillRect(-this.widthHalf,2*-this.heightQuarter,this.width,this.heightQuarter),t.fillStyle="#242424",t.fillRect(-this.widthHalf,-this.heightQuarter,this.width,this.heightQuarter),t.fillStyle="rgba(255, 255, 255, 0.3)",t.fillRect(-this.widthQuarter,-this.height,this.widthHalf,this.height),t.beginPath(),t.moveTo(-this.widthHalf+this.widthQuarter,-this.height),t.lineTo(0,-this.height-this.width-this.widthQuarter),t.lineTo(this.widthHalf-this.widthQuarter,-this.height),t.lineTo(-this.widthHalf+this.widthQuarter,-this.height),t.closePath(),t.fill(),t.fillStyle="#8c8468",t.fillRect(-this.widthHalf,0,2,25)}drawWings(t){t.fillStyle=this.color2,t.strokeStyle=X,t.beginPath(),t.moveTo(-this.width,this.heightQuarter),t.lineTo(-this.width,-this.heightQuarter),t.lineTo(-this.widthHalf,-this.heightHalf),t.lineTo(-this.widthHalf,this.heightQuarter),t.lineTo(-this.width,this.heightQuarter),t.fill(),t.stroke(),t.beginPath(),t.moveTo(this.width,this.heightQuarter),t.lineTo(this.width,-this.heightQuarter),t.lineTo(this.widthHalf,-this.heightHalf),t.lineTo(this.widthHalf,this.heightQuarter),t.lineTo(this.width,this.heightQuarter),t.fill(),t.stroke(),t.beginPath(),t.rect(-1,-this.heightHalf,2,this.heightHalf+this.heightQuarter),t.fill(),t.stroke()}}};class W{createFirework(t,e){const o=[];let r;return W.correctFireworkData(t),t.rocketType?(r=W.createRocket(t,e),t.explosionType&&o.push(new Promise((e=>{r.finishCallback=o=>{e(W.createExplosion({...t,position:o}))}})))):t.explosionType&&(r=W.createExplosion(t)),r&&o.unshift(Promise.resolve(r)),o}getRandomFirework(t,e=!0){const o=[...Object.values(q)],r=[...Object.values(G)];return{explosionType:o[Math.floor(Math.random()*o.length)],rocketType:r[Math.floor(Math.random()*r.length)],sizeFactor:c(),elementsFactor:c(),angleFactor:c(),rocketFading:!0,canBeLaunched:!0,position:t,autoLaunch:e}}static createExplosion(t){const e=Q[t.explosionType]||null;if(!e)throw new Error("Unknown type of explosion");return new e(t)}static createRocket(t,e){const o=U[t.rocketType]||null;if(!o)throw new Error("Unknown type of rocket");return new o(t,e)}static correctFireworkData(t){var e,o;void 0!==t.sizeFactor&&(t.sizeFactor=l(+t.sizeFactor)),void 0!==t.elementsFactor&&(t.elementsFactor=l(+t.elementsFactor)),void 0!==t.angleFactor&&(t.angleFactor=l(+t.angleFactor)),void 0===t.position||"number"==typeof(null===(e=t.position)||void 0===e?void 0:e.x)&&"number"==typeof(null===(o=t.position)||void 0===o?void 0:o.y)||delete t.position}}const Z="rgba(11, 17, 34, 0.9)";class Y extends t{constructor(){super(),this.updateCanvasSize=()=>{this.canvasFront&&(this.hasAttribute("fullscreen")?(this.canvasFront.width=window.innerWidth||document.documentElement.clientWidth,this.canvasFront.height=window.innerHeight||document.documentElement.clientHeight):(this.canvasFront.width=parseInt(this.getAttribute("width"),10)||200,this.canvasFront.height=parseInt(this.getAttribute("height"),10)||100),this.canvasBack.width=this.canvasFront.width,this.canvasBack.height=this.canvasFront.height,this.rendererBack.requestRender(),this.rendererFront.requestRender())},this.bgImageLoader=Promise.resolve(),this.fireworks=new WeakMap,this.elements=new WeakMap,this.deleteList=new WeakSet,this.builder=new W}static get observedAttributes(){return["fullscreen","width","height","bg-color","bg-image","sounds-url"]}get canvas(){return this.canvasFront}async addFirework(t){let e=t.autoLaunch||!1;const o=this.builder.createFirework(t,this.canvasFront);for(const r of o){const o=await r;if(this.deleteList.has(t))return;this.fireworks.set(t,o),this.elements.set(o,t),e||!t.canBeLaunched?this.renderListFront.add(o,0,t.onBeforeRender||null,t.onAfterRender||null):this.renderListBack.add(o,0,t.onBeforeRender||null,t.onAfterRender||null),this.rendererBack.requestRender(),this.rendererFront.requestRender()}}getRandomFirework(t,e=!0){return this.builder.getRandomFirework(t,e)}removeFirework(t){if(this.deleteList.add(t),!this.fireworks.has(t))return;const e=this.fireworks.get(t);this.renderListFront.remove(e),this.renderListBack.remove(e),this.rendererBack.requestRender(),this.rendererFront.requestRender()}removeAllFireworks(){this.renderListBack.clear(),this.renderListFront.clear(),this.rendererBack.requestRender(),this.rendererFront.requestRender()}launchFirework(t){if(this.deleteList.has(t))return;if(!this.fireworks.has(t))return;if(!t.canBeLaunched)return;const e=this.fireworks.get(t);e instanceof H&&e.launch()}async render(){return new Promise((t=>{this.rendererFront.requestRender(t)}))}connectedCallback(){this.renderElement(),this.updateCanvasSize(),window.addEventListener("resize",this.updateCanvasSize),this.preloadSounds(),this.bgImageLoader.then((()=>{this.rendererBack.start(),this.rendererFront.start()}))}disconnectedCallback(){this.rendererBack.finish(),this.rendererFront.finish(),window.removeEventListener("resize",this.updateCanvasSize)}renderElement(){this.createShadowDom(":host([fullscreen]){position:relative;display:block}canvas{position:absolute}",'\n\t\t\t\t<canvas data-role="back"></canvas>\n\t\t\t\t<canvas data-role="front"></canvas>\n\t\t\t'),this.canvasFront=this.shadowRoot.querySelector('canvas[data-role="front"]'),this.renderListFront=new r,this.rendererFront=new e(this.renderListFront,this.canvasFront.getContext("2d")),this.rendererFront.useGlowTail(),this.canvasBack=this.shadowRoot.querySelector('canvas[data-role="back"]'),this.renderListBack=new r,this.rendererBack=new e(this.renderListBack,this.canvasBack.getContext("2d")),this.rendererBack.backgroundColor=this.getAttribute("bg-color")||Z,this.rendererBack.observe(this.handleRender.bind(this)),this.canvasFront.addEventListener("click",this.handleClick.bind(this)),this.hasAttribute("bg-image")&&(this.bgImageLoader=this.rendererBack.setBackgroundImage(this.getAttribute("bg-image")||""))}handleRender(){this.dispatchEvent(new CustomEvent("render",{bubbles:!1,cancelable:!1,composed:!0}))}handleAttributesChange(){this.updateCanvasSize()}handleBgColorChange(){this.rendererBack&&(this.rendererBack.backgroundColor=this.getAttribute("bg-color")||Z)}handleBgImageChange(){this.rendererBack&&(this.bgImageLoader=this.rendererBack.setBackgroundImage(this.getAttribute("bg-image")||""))}preloadSounds(){this.hasAttribute("sounds-url")&&(v.assetsUrl=this.getAttribute("sounds-url"));for(const t of Object.values(f))new v(t).preloadFile()}handleClick(t){const{left:e,top:o}=this.getBoundingClientRect(),r=t.clientX-e,i=t.clientY-o,n=this.renderListBack.getElementUnderPoint({x:r,y:i});if(!(n instanceof H&&this.elements.has(n)))return;const s=this.elements.get(n);s.canBeLaunched&&(this.dispatchEvent(new CustomEvent("launch",{composed:!0,bubbles:!1,cancelable:!1,detail:s})),this.renderListFront.add(n,0,s.onBeforeRender||null,s.onAfterRender||null),this.rendererFront.requestRender((()=>{this.rendererBack.requestRender(),this.renderListBack.remove(n),n.launch()})))}}const K='form{margin:var(--indent-md)}label{display:block;color:var(--brd-color);margin-bottom:var(--indent-sm, 3px)}select{appearance:none;width:100%;outline:none;border:none;box-sizing:border-box;color:var(--text-color);border-bottom:1px solid var(--brd-color);font-size:var(--font-size);background-color:transparent;background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2012%2012%22%3E%3Cpath%20d%3D%22M10.293%2C3.293%2C6%2C7.586%2C1.707%2C3.293A1%2C1%2C0%2C0%2C0%2C.293%2C4.707l5%2C5a1%2C1%2C0%2C0%2C0%2C1.414%2C0l5-5a1%2C1%2C0%2C1%2C0-1.414-1.414Z%22%20fill%3D%22%23aaaaaa%22%2F%3E%3C%2Fsvg%3E");background-repeat:no-repeat;background-size:10px 10px;background-position:right center;padding:3px 20px 3px 3px;margin-bottom:var(--indent-md)}select option{color:#333;background-color:#fff}button{background:none;outline:none;color:inherit;padding:var(--indent-sm) var(--indent-md);border:1px solid var(--brd-color);cursor:pointer;font-size:var(--font-size)}button:hover{border-color:var(--txt-color)}button:active{background-color:var(--bg-color);border-color:var(--brd-color)}';var J=o(344),$=o.n(J),tt=o(282),et=o.n(tt);class ot extends t{constructor(){super(...arguments),this.canvas=null}static get observedAttributes(){return["for"]}get targetCanvas(){if(null!==this.canvas)return this.canvas;if(!this.hasAttribute("for"))return null;const t=document.getElementById(this.getAttribute("for"));return t instanceof Y?(this.canvas=t,this.canvas):null}handleForChange(){this.canvas=null}}var rt=o(886),it=o.n(rt);class nt extends ot{constructor(){super()}getFirework(){const t=new Map;return this.shadowRoot&&this.shadowRoot.querySelectorAll("[name][value]").forEach((e=>{t.set(e.name,e.value)})),this.createFirework(t)}}var st=o(781),at=o.n(st),lt=o(459),ht=o.n(lt),ct=o(151),dt=o.n(ct),ut=o(357),pt=o.n(ut);window.customElements.define("fw-exp-type0",class extends nt{constructor(){super(),this.createShadowDom(K,it()())}createFirework(t){return{colors:[t.get("color")],explosionType:"type0"}}}),window.customElements.define("fw-exp-type1-circle",class extends nt{constructor(){super(),this.createShadowDom(K,at()())}createFirework(t){return{colors:[t.get("color1"),t.get("color2")],explosionType:"type1-circle"}}}),window.customElements.define("fw-exp-type1-sphere",class extends nt{constructor(){super(),this.createShadowDom(K,dt()())}createFirework(t){return{colors:[t.get("color1"),t.get("color2")],explosionType:"type1-sphere"}}}),window.customElements.define("fw-exp-type1-disk",class extends nt{constructor(){super(),this.createShadowDom(K,ht()())}createFirework(t){return{colors:[t.get("color")],explosionType:"type1-disk"}}}),window.customElements.define("fw-exp-type2",class extends nt{constructor(){super(),this.createShadowDom(K,pt()())}createFirework(t){return{colors:[t.get("color")],explosionType:"type2"}}}),window.customElements.define("fw-exp-comb",class extends nt{constructor(){super()}createFirework(t){return{explosionType:this.getAttribute("type")||"comb1"}}});var ft=o(186),mt=o.n(ft),gt=o(200),vt=o.n(gt),wt=o(924),bt=o.n(wt),yt=o(463),xt=o.n(yt),kt=o(320),Mt=o.n(kt);window.customElements.define("fw-rocket-type0",class extends nt{constructor(){super(),this.createShadowDom(K,xt()())}createFirework(t){return{colors:[t.get("color")],rocketType:"type0"}}}),window.customElements.define("fw-rocket-type1",class extends nt{constructor(){super(),this.createShadowDom(K,Mt()())}createFirework(t){return{colors:[t.get("color1"),t.get("color2")],rocketType:"type1"}}}),window.customElements.define("fw-exp-form",class extends ot{constructor(){super(),this.createShadowDom(K,et()({for:this.getAttribute("for")})),this.form=this.shadowRoot.querySelector("form"),this.form.onsubmit=this.submit.bind(this),this.select=this.shadowRoot.querySelector("select"),this.select.onchange=this.updateVisibleForms.bind(this),this.updateVisibleForms()}updateVisibleForms(){this.shadowRoot.querySelectorAll("[data-type]").forEach((t=>{t.hidden=t.dataset.type!==this.select.value}))}getVisibleForm(){return this.shadowRoot.querySelector(`[data-type="${this.select.value}"]`)}submit(t){t.preventDefault();const e=new FormData(this.form),o=this.getVisibleForm().getFirework();if(this.targetCanvas){const t=this.targetCanvas.canvasFront;o.position={x:t.width>>1,y:t.height>>1}}o.sizeFactor=parseFloat(e.get("distance").toString()),o.elementsFactor=parseFloat(e.get("elements").toString()),o.autoLaunch=!0,this.dispatchEvent(new CustomEvent(Et,{detail:o,bubbles:!0}))}}),window.customElements.define("fw-rockets-form",class extends ot{constructor(){super(),this.createShadowDom(K,bt()({for:this.getAttribute("for")})),this.form=this.shadowRoot.querySelector("form"),this.form.onsubmit=this.submit.bind(this),this.select=this.shadowRoot.querySelector("select"),this.select.onchange=this.updateVisibleForms.bind(this),this.updateVisibleForms()}updateVisibleForms(){this.shadowRoot.querySelectorAll("[data-type]").forEach((t=>{t.hidden=t.dataset.type!==this.select.value}))}getVisibleForm(){return this.shadowRoot.querySelector(`[data-type="${this.select.value}"]`)}submit(t){t.preventDefault();const e=new FormData(this.form),o=this.getVisibleForm().getFirework();if(this.targetCanvas){const t=this.targetCanvas.canvasFront;o.position={x:t.width>>1,y:t.height-100}}o.sizeFactor=parseFloat(e.get("distance").toString()),o.angleFactor=parseFloat(e.get("angle").toString()),o.autoLaunch=!0,o.rocketFading=!1,this.dispatchEvent(new CustomEvent(Et,{detail:o,bubbles:!0}))}}),window.customElements.define("fw-color-picker",class extends t{constructor(){super(),this.createShadowDom(":host>div{display:flex;flex-wrap:wrap;margin-bottom:var(--indent-md)}:host>div>div{width:16px;height:16px;box-sizing:border-box;background-color:var(--color, #fff);margin-right:var(--indent-sm, 5px);margin-bottom:var(--indent-sm, 5px);border:1px solid var(--bg-color, #333);cursor:pointer}:host>div>div:hover{outline:1px solid var(--brd-color, #aaa)}:host>div>div.selected,:host>div>div.selected:hover{outline:1px solid var(--text-color, #fff)}",mt()({colors:this.colorPalette})),this.shadowRoot.querySelectorAll("div[data-color]").forEach((t=>{t.addEventListener("click",(()=>{this.setAttribute("value",t.dataset.color)}))})),this.input=document.createElement("input"),this.input.type="hidden",this.appendChild(this.input)}static get observedAttributes(){return["name","value","autofill"]}get colorPalette(){return"rockets"===this.getAttribute("palette")?y:w}handleNameChange(){this.input.name=this.getAttribute("name")||""}handleAutofillChange(){this.hasAttribute("autofill")&&""===this.input.value&&this.setAttribute("value",this.colorPalette[0])}handleValueChange(){var t,e;const o=this.getAttribute("value")||"";(""===o||this.colorPalette.includes(o))&&(this.input.value=o,""!==o&&(null===(t=this.shadowRoot.querySelector("div.selected"))||void 0===t||t.classList.remove("selected"),null===(e=this.shadowRoot.querySelector(`div[data-color="${o}"]`))||void 0===e||e.classList.add("selected")))}}),window.customElements.define("fw-input-range",class extends t{constructor(){super(),this.createShadowDom(":host{--range-track-color: var(--brd-color, #aaa);--range-thumb-color: var(--text-color, #fff);--range-thumb-height: 12px;--range-thumb-width: 12px;--range-track-width: 100%;--range-track-height: 6px}:host>div{display:flex;align-items:center;height:calc(var(--range-track-height) + var(--indent-md, 5px) * 2)}:host>div>span{flex-basis:30px;padding-left:var(--indent-sm, 3px);text-align:left;user-select:none}input{flex:1;background-color:transparent;-webkit-appearance:none;margin:calc(var(--range-thumb-height) / 2 - var(--range-track-height) / 2) 0;position:relative}input:focus{outline:none}input::-webkit-slider-runnable-track{width:var(--range-track-width);height:var(--range-track-height);border-radius:3px;box-sizing:border-box;cursor:pointer;background:var(--range-track-color);border:none}input::-webkit-slider-thumb{border:none;height:var(--range-thumb-height);width:var(--range-thumb-width);background:var(--range-thumb-color);cursor:pointer;border-radius:50%;-webkit-appearance:none;margin-top:calc((var(--range-track-height) / 2) - (var(--range-thumb-height) / 2))}input:focus::-webkit-slider-runnable-track{background:var(--range-track-color);border:none}input::-moz-range-track{width:var(--range-track-width);height:var(--range-track-height);border-radius:3px;box-sizing:border-box;cursor:pointer;background:var(--range-track-color);border:none}input::-moz-range-thumb{border:none;height:var(--range-thumb-height);width:var(--range-thumb-width);background:var(--range-thumb-color);cursor:pointer;border-radius:50%}input::-ms-track{width:var(--range-track-width);height:var(--range-track-height);border-radius:3px;box-sizing:border-box;cursor:pointer;background:transparent;border-color:transparent;border-width:var(--range-thumb-width) 0;color:transparent}input::-ms-fill-lower{background:var(--range-track-color);border:none}input::-ms-fill-upper{background:var(--range-track-color);border:none}input::-ms-thumb{border:none;height:var(--range-thumb-height);width:var(--range-thumb-width);background:var(--range-thumb-color);cursor:pointer;border-radius:50%}input:focus::-ms-fill-lower{background:var(--range-track-color)}input:focus::-ms-fill-upper{background:var(--range-track-color)}",vt()({min:this.getAttribute("min")||"0",max:this.getAttribute("min")||"1",step:this.getAttribute("step")||"1",value:this.getAttribute("value")||"0"})),this.input=document.createElement("input"),this.input.type="hidden",this.input.value="0",this.appendChild(this.input),this.range=this.shadowRoot.querySelector("input"),this.range.addEventListener("input",(()=>{this.setAttribute("value",this.range.value)})),this.range.addEventListener("input",(()=>{this.setAttribute("value",this.range.value)})),this.valueEl=this.shadowRoot.querySelector("span")}static get observedAttributes(){return["name","value","min","max","step"]}handleNameChange(){this.input.name=this.getAttribute("name")||""}handleValueChange(){this.input.value=this.getAttribute("value")||"0",this.range.value=this.input.value,this.valueEl.textContent=this.input.value}handleStepChange(){this.range.step=this.getAttribute("step")||"1"}handleMinChange(){this.range.min=this.getAttribute("min")||"0"}handleMaxChange(){this.range.max=this.getAttribute("max")||"0"}});const Et="add-firework-element";window.customElements.define("fw-canvas",Y),window.customElements.define("fw-dev-tool",class extends ot{constructor(){super(),this.createShadowDom(':host{--indent-md: 6px;--indent-sm: 4px;--font-size: 12px;--text-color: #fff;--brd-color: #888;--bg-color: #333;position:fixed;left:20px;top:20px;z-index:var(--z-index, 100001);background-color:rgba(0,0,0,.6);color:var(--text-color);border:1px solid var(--brd-color);font-size:var(--font-size);font-family:Tahoma,Helvetica,Arial,sans-serif;width:250px}summary{height:20px;line-height:20px;outline:none;cursor:pointer;user-select:none;background-color:var(--bg-color);padding:var(--indent-sm) var(--indent-md)}.output-json{white-space:pre-wrap;color:var(--text-color);margin:var(--indent-md);font-family:"Courier New",monospace}.output-json:empty:before{content:"nothing to show...";font-style:italic}.random-fireworks{color:var(--text-color);margin:var(--indent-md)}'+K,$()({})),this.shadowRoot.addEventListener(Et,this.addToRenderList.bind(this)),this.outputJsonEl=this.shadowRoot.querySelector(".output-json"),this.shadowRoot.querySelector(".random-fireworks button").onclick=this.showRandomFirework.bind(this)}handleForChange(){super.handleForChange(),this.shadowRoot.querySelectorAll("[for]").forEach((t=>{t.setAttribute("for",this.getAttribute("for"))}))}showRandomFirework(){if(!this.targetCanvas)return;const t=this.targetCanvas.canvasFront,e=this.targetCanvas.getRandomFirework({x:t.width>>1,y:t.height-100});this.outputJsonEl.textContent=JSON.stringify(e,null," "),this.targetCanvas.addFirework(e).then()}addToRenderList(t){this.targetCanvas&&(this.outputJsonEl.textContent=JSON.stringify(t.detail,null," "),this.targetCanvas.addFirework(t.detail).then())}})})()})();